{"version":3,"sources":["webpack:///./js/services/apiService.js","webpack:///./js/spinner.js","webpack:///./js/image.js","webpack:///./templates/gallery-list-items.hbs"],"names":["page","query","fetchImages","requestParameters","this","fetch","then","response","ok","json","Error","statusText","parsedResponse","incrementPage","hits","catch","error","console","log","string","resetPage","spinner","document","querySelector","classList","remove","add","refs","form","galleryList","loadMoreBtn","imageService","images","length","PNotify","text","items","markup","scrollHeight","viewPortHeight","delta","imageListItemsTemplate","insertAdjacentHTML","Math","max","body","documentElement","offsetHeight","clientHeight","window","scrollTo","top","behavior","warn","addEventListener","event","preventDefault","input","currentTarget","elements","value","largeImageUrl","target","dataset","source","basicLightbox","closable","onShow","onClose","show","Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop"],"mappings":"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","file":"main.2c2871ab6d0324572fe6.js","sourcesContent":["const baseUrl = 'https://pixabay.com/api/';\nconst API_KEY = '17911515-029745efd9a604c772829a1f1';\n\nexport default {\n  page: 1,\n  query: '',\n  fetchImages() {\n    const requestParameters = `?image_type=photo&orientation=horizontal&q=${this.query}&page=${this.page}&per_page=12&key=${API_KEY}`;\n\n    return fetch(baseUrl + requestParameters)\n      .then(response => {\n        if (response.ok) {\n          return response.json();\n        }\n\n        throw new Error(\n          `Error ${response.statusText} while fetching \"${this.query}\"`,\n        );\n      })\n      .then(parsedResponse => {\n        this.incrementPage();\n        return parsedResponse.hits;\n      })\n      .catch(error => {\n        console.log('ERROR:', error);\n      });\n  },\n\n  get searchQuery() {\n    return this.query;\n  },\n\n  set searchQuery(string) {\n    this.query = string;\n  },\n\n  incrementPage() {\n    this.page += 1;\n  },\n\n  resetPage() {\n    this.page = 1;\n  },\n};\n","const spinner = document.querySelector('#spinner');\n\nexport default {\n  show() {\n    spinner.classList.remove('is-hidden');\n  },\n\n  hide() {\n    spinner.classList.add('is-hidden');\n  },\n};\n","import imageService from './services/apiService';\nimport spinner from './spinner';\nimport imageListItemsTemplate from '../templates/gallery-list-items.hbs';\nimport * as PNotify from '@pnotify/core';\nimport '@pnotify/core/dist/PNotify.css';\nimport '@pnotify/core/dist/BrightTheme.css';\nimport * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\n\nconst refs = {\n  form: document.querySelector('#search-form'),\n  galleryList: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nrefs.form.addEventListener('submit', handleFormSubmit);\nrefs.loadMoreBtn.addEventListener('click', handleLoadMoreBtn);\nrefs.galleryList.addEventListener('click', handleImageClick);\n\nfunction handleFormSubmit(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  const input = form.elements.query;\n\n  imageService.query = input.value;\n\n  if (!input.value) {\n    PNotify.error({\n      text: 'Write something',\n    });\n    return;\n  }\n\n  imageService.resetPage();\n\n  fetchImages();\n  refs.loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction insertGalleryItems(items) {\n  const markup = imageListItemsTemplate(items);\n  refs.galleryList.insertAdjacentHTML('beforeend', markup);\n}\n\nfunction handleLoadMoreBtn() {\n  fetchImages();\n}\n\nfunction handleImageClick(event) {\n  const target = event.target;\n  const largeImageUrl = target.dataset.source;\n\n  basicLightbox\n    .create(`<img src=\"${largeImageUrl}\" width=\"800\" height=\"600\">`, {\n      closable: true,\n      onShow() {\n        spinner.show();\n      },\n      onClose() {\n        spinner.hide();\n      },\n    })\n    .show();\n}\n\nfunction fetchImages() {\n  spinner.show();\n\n  imageService\n    .fetchImages()\n    .then(images => {\n      if (images.length === 0) {\n        PNotify.error({\n          text: 'Ooops, try again',\n        });\n        spinner.hide();\n\n        return;\n      }\n      spinner.hide();\n      insertGalleryItems(images);\n      scrollScreen();\n    })\n    .catch(error => {\n      console.warn(error);\n    });\n}\n\nfunction scrollScreen() {\n  const scrollHeight = Math.max(\n    document.body.scrollHeight,\n    document.documentElement.scrollHeight,\n    document.body.offsetHeight,\n    document.documentElement.offsetHeight,\n    document.body.clientHeight,\n    document.documentElement.clientHeight,\n  );\n  const viewPortHeight = document.documentElement.clientHeight;\n\n  const delta = scrollHeight - viewPortHeight * 1.7;\n\n  console.log('viewPortHeight', viewPortHeight);\n  console.log('scrollHeight', scrollHeight);\n  console.log('delta', delta);\n\n  window.scrollTo({\n    top: delta,\n    behavior: 'smooth',\n  });\n}\n","var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"gallery__item\\\">\\n  <div class=\\\"photo-card\\\">\\n    <img src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":14},\"end\":{\"line\":4,\"column\":30}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"user\") || (depth0 != null ? lookupProperty(depth0,\"user\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"user\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":37},\"end\":{\"line\":4,\"column\":45}}}) : helper)))\n    + \"\\\" data-source=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":60},\"end\":{\"line\":4,\"column\":77}}}) : helper)))\n    + \"\\\" />\\n\\n    <div class=\\\"stats\\\">\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">thumb_up</i>\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":8},\"end\":{\"line\":9,\"column\":17}}}) : helper)))\n    + \"\\n      </p>\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">visibility</i>\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":8},\"end\":{\"line\":13,\"column\":17}}}) : helper)))\n    + \"\\n      </p>\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">comment</i>\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":8},\"end\":{\"line\":17,\"column\":20}}}) : helper)))\n    + \"\\n      </p>\\n      <p class=\\\"stats-item\\\">\\n        <i class=\\\"material-icons\\\">cloud_download</i>\\n        \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":8},\"end\":{\"line\":21,\"column\":21}}}) : helper)))\n    + \"\\n      </p>\\n    </div>\\n  </div>\\n</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":26,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});"],"sourceRoot":""}